\section{Mapfile}
Mapfile adalah jantung dari MapServer. Mapfile mendefinisikan hubungan antara objek, mendefinisikan tempat data berada dan menentukan bagaimana hal-hal yang harus digambar. 

File .MAP adalah file teks ASCII, dan terdiri dari berbagai objek. Setiap objek memiliki beragam parameter yang tersedia. Mapfile terdiri dari objek MAP, yang harus dimulai dengan kata MAP. Konsep LAPISAN, Lapisan adalah kombinasi data dan model. Data, dalam bentuk atribut geometri, diberi model menggunakan arahan CLASS dan STYLE.

Mapfile menyediakan antarmuka untuk MapServer untuk pembuatan aplikasi Web. Mapfile dapat digunakan secara independen dari CGI MapServer atau modulnya dapat dimuat yang menambahkan MapServer ke bahasa PHP, Perl, Python, Ruby, Tcl, Java, dan .NET.

Contoh mapfile sederhana yang hanya menampilkan satu layer serta output gambar peta.
\begin{lstlisting}
MAP
    NAME "sample"
    STATUS ON
    SIZE 600 400
    SYMBOLSET "../etc/symbols.txt"
    EXTENT -180 -90 180 90
    UNITS DD
    SHAPEPATH "../data"
    IMAGECOLOR 255 255 255
    FONTSET "../etc/fonts.txt"
    # Start of web interface definition
    WEB
        IMAGEPATH "/ms4w/tmp/ms_tmp/"
        IMAGEURL "/ms_tmp/"
    END # WEB
    # Start of layer definitions
    LAYER
        NAME 'global-raster'
        TYPE RASTER
        STATUS DEFAULT
        DATA bluemarble.gif
    END # LAYER
END # MAP
\end{lstlisting}

Catatan:
\begin{enumerate}
\item Komentar dalam mapfile ditentukan dengan karakter '\#'.
\item MapServer mem-parsing mapfile dari atas ke bawah, oleh karena itu lapisan pada ujung mapfile akan ditarik terakhir.
\item Path harus dikutip (kutipan tunggal atau ganda).
\item Mapfile tidak case-sensitive.
\item String yang berisi karakter non-alfanumerik atau kata kunci MapServer HARUS dikutip. Disarankan untuk menempatkan SEMUA string dalam tanda kutip ganda.
\item Mapfile memiliki struktur hierarkis, dengan objek MAP menjadi "root".
\end{enumerate}

\section{Pembahasan Syntax}
\subsection{MAP}
Objek peta dimulai dengan kata MAP, dan berakhir dengan kata END.
\begin{lstlisting}
MAP
  NAME "sample"
  EXTENT -180 -90 180 90 # Geographic
  SIZE 800 400
  IMAGECOLOR 128 128 255
END #MAP
\end{lstlisting}

Penjelasan:
\begin{enumerate}
\item NAME adalah nama map
\item EXTENT adalah tingkat output dalam unit peta output.
\item SIZE adalah lebar dan tinggi gambar peta dalam piksel.
\item IMAGECOLOR adalah warna latar belakang gambar default.
\end{enumerate}

\subsection{LAYER Object}
Objek layer ada 2 yaitu Raster dan Vektor.
\begin{enumerate}
\item Raster Layers
\begin{lstlisting}
LAYER
    NAME "bathymetry"
    TYPE RASTER
    STATUS DEFAULT
    DATA "bath_mapserver.tif"
END # LAYER
\end{lstlisting}

Penjelasan:
\begin{enumerate}
\item NAME adalah nama layer.
\item TYPE adalah jenis dari layer tsb.
\item STATUS adalah kondisi dari layer tsb.
\item DATA adalah file SHP atau tif yang berisi informasi koordinat.
\end{enumerate}

\item Vertor Layer
\begin{lstlisting}
LAYER
  NAME "world_poly"
  DATA 'shapefile/countries_area.shp'
  STATUS ON
  TYPE POLYGON
  CLASS
    NAME 'The World'
    STYLE
      OUTLINECOLOR 0 0 0
    END # STYLE
  END # CLASS
END # LAYER
\end{lstlisting}

Penjelasan:
\begin{enumerate}
\item NAME adalah nama layer.
\item TYPE adalah jenis dari layer yang akan di tampilkan seperti point, line, atau polygon.
\item STATUS adalah kondisi dari layer tsb.
\item DATA adalah file SHP atau tif yang berisi informasi koordinat
\end{enumerate}
\end{enumerate}

\subsection{CLASS and STYLE Objects}
\begin{lstlisting}
CLASS
  NAME "Primary Roads"
  STYLE
    SYMBOL "circle"
    COLOR 178 114 1
    SIZE 15
  END # STYLE
  STYLE
    SYMBOL "circle"
    COLOR 254 161 0
    SIZE 7
  END # STYLE
END # CLASS
\end{lstlisting}

Penjelasan:
\begin{enumerate}
\item NAME adalah nama layer.
\item STYLE memegang parameter untuk simbolisasi dan gaya. Berbagai gaya dapat diterapkan dalam CLASS atau LABEL.
\item COLOR penentuan warna pada objek.
\end{enumerate}

\subsection{PROJECTION}
Untuk mengatur proyeksi Anda harus menetapkan satu objek proyeksi untuk gambar output (dalam objek MAP) dan satu objek proyeksi untuk setiap lapisan (dalam objek LAPISAN) yang akan diproyeksikan. Objek proyeksi terdiri dari serangkaian kata kunci PROJ.4, yang dapat ditentukan dalam objek secara langsung atau dirujuk dalam file EPSG. File EPSG adalah file pencarian yang berisi parameter proyeksi, dan merupakan bagian dari perpustakaan PROJ.4.

Contoh parameter proyeksi:
\begin{lstlisting}
PROJECTION
   "init=epsg:4326"
END
\end{lstlisting}

\section{Tutorial Membuat mapfile untuk WCS, WFS, WMS dan WMTS}
\subsection{Membuat Mapfile untuk WCS}
\begin{enumerate}
\item Buat file baru dengan nama wcs.map untuk menyiman script konfigurasi wcs
\item Masukan script map objek di bawah ini ke file wcs.map, pada script ini kita menentukan lebar peta, warna gambar serta mendefinisikan sumber map, fontset dan symbolset yang akan digunakan. 
\begin{lstlisting}
MAP
   NAME WCS_Server
   STATUS ON
   SIZE 400 300
   SYMBOLSET "../../etc/symbols.txt"
   EXTENT -2200000 -712631 3072800 3840000
   UNITS METERS
   SHAPEPATH "../data"
   IMAGECOLOR 255 255 255
   FONTSET "../../etc/fonts.txt"
END #Map file
\end{lstlisting}
\item Setelah itu kita masukan script untuk konfigurasi web interfacenya sebelum syntax END, didalam script ini berisi konfigurasi untuk web interface berupa tempat gambar serta metadata yang mendefinisakan informasi dalam tampilan antarmuka web.
\begin{lstlisting}
WEB
   IMAGEPATH "/ms4w/tmp/ms_tmp/"
   IMAGEURL "/ms_tmp/"
   METADATA
     "wcs_label"           "GMap WCS Demo Server" ### required
     "wcs_description"     "Some text description of the service"
     "wcs_onlineresource"  "http://localhost:8080/cgi-bin/mapserv.exe?map=C:/ms4w/apps/indo/map/mywcs.map&" 
     "wcs_fees"            "none"
     "wcs_accessconstraints"    "none"
     "wcs_keywordlist"          "wcs,test"
     "wcs_metadatalink_type"    "TC211"
     "wcs_metadatalink_format"  "text/plain"
     "wcs_metadatalink_href"    "http://awangga.net"
     "wcs_address"              "124 Gilmour Street"
     "wcs_city"                 "Ottawa"
     "wcs_stateorprovince"      "ON"
     "wcs_postcode"             "90210"
     "wcs_country"              "Canada"
     "wcs_contactelectronicmailaddress" "blah@blah"
     "wcs_contactperson"            "me"
     "wcs_contactorganization"      "unemployed"
     "wcs_contactposition"          "manager"
     "wcs_contactvoicetelephone"    "613-555-1234"
     "wcs_contactfacimiletelephone" "613-555-1235"
     "wcs_service_onlineresource"   "http://localhost:8080/cgi-bin/mapserv.exe?map=C:/ms4w/apps/indo/map/mywcs.map&"
     "wcs_enable_request"           "*"
   END #Metadata
 END #Web
\end{lstlisting}
\end{enumerate}



